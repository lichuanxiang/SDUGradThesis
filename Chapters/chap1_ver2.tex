\chapter{\quad\quad绪\quad论}
\echapter{Introduction}
\label{chap1}

\section{研究背景及意义}
\esection{Background and Motivation}

三维建模是计算机图形学研究领域的重要分支。随着数字化时代的来临，人们对三维模型的需求日益增长。大量三维模型被广泛的应用在各种场合，如工业制造、医学重建、家居设计、建筑设计、游戏动画等领域。三维建模技术需要满足不同场合的特定要求，比如制造加工领域对三维模型的精度有着极高的要求，家居设计需要保证三维模型的真实性、功能性，游戏动画建模师等行业则需要易用的交互界面以及高自由度来创造原创的、具有想象力的人物角色或物体形状模型。

目前各种三维建模技术已有广泛且相对成熟的应用。我们可以通过相机或扫描设备获取现实世界中的数据，并将其数字化为虚拟三维模型；可以利用3ds Max或Maya等软件自由创建想象中的人物或物体形状；也可以通过动作捕捉技术将现实中表情、动作转移到虚拟模型上，利用变形得到期望的形状模型。

然而，目前已有的建模技术还远远不能满足人们日益增长的需求，三维建模所面临的挑战主要集中在两方面：一是如何针对模型的不同特性进行建模，比如使模型在精度、传输、渲染等方面有更好的表现，或者对场景甚至城市等大规模数据进行建模。这些问题需要对不同模型数据选择合适的数字化表达方式，进而提高建模能力。二是如何改进建模方法的易用性，使得普通人也能容易地创建自定义的模型数据。目前大多数行业仍需要聘请建模师或设计师在专业软件上进行操作，来创建合适的三维模型。这一问题关联到三维模型形状的分析，需要机器能够智能的理解用户的意图并提出合理的建模结果，从而使得用户可以通过简单的操作来生成复杂的形状。

硬件设备和人工智能的发展，给三维建模技术带来了机遇，也使得解决以上挑战变得尤为迫切。硬件设备的发展使得我们能够更自由的捕获所需的现实世界数据，得到更加完整、丰富的原始信息，也使得精确、智能的模型数字化成为急需解决的目标。另一方面，人工智能对大规模三维模型数据库以及丰富的标签数据提出了要求，但也激发了智能易用的建模技术的发展。

\section{研究现状及挑战}
\esection{Research Overview}

三维建模一直是计算机图形学的重要研究分支，其目标是协助用户创建数字化的模型曲面，针对不同的数字化表达、模型特性、应用需求已有很多有价值的研究。对于数字化表达，在计算机中物体曲面可以有多种表达方式，如体素化表达、三角或四边网格、隐式曲面表达、结构化表达。不同的表达方式具有特定的优缺点，适用于不同场合。对于三维模型的特性，在不同应用场合中我们要考虑物体的形状、语义、功能、交互方式等因素，因此相关研究通常也涉及到对物体模型的认知分析。对于建模的应用需求，有时需要精确的重建出针对特定输入的模型形状，这些输入包括扫描设备捕获的点云或者深度相机获取的深度图像等；有时需要根据根据用户输入的草图或简单交互进行创新式的建模，这时往往对模型的真实性、功能性、风格等有所要求。

本文将三维建模大致分为三类问题：三维曲面的重建式建模、交互式建模、三维结构模型的建模。重建式建模的目标是精确的恢复出设备捕获数据所表示的曲面，其仅仅依赖于输入数据，而不需要过多的先验知识。因此，重建式建模的研究对象一般称为自由曲面，指各种各样的物体形状表面。而交互式建模需要用户进行操作对模型进行编辑、变形、或合成。用户输入的提示可能是抽象的，如对物体类别、功能、风格等的设定，之后算法利用一些先验知识来保证建模结果满足用户要求，及其真实性和可用性。
%数据驱动的模型建模与生成工作则随着近年来深度学习的发展出现爆炸式增长，利用深度网络可学习到如何将不完整的形状信息映射到完整的物体曲面，或者自动生成符合要求的三维模型。
复杂三维结构模型则将其研究对象分解成某种结构体，即整体-组件的结构，一般用树或图等数据结构表示。这些工作不仅考虑研究对象整体以及各组件的类别和形状，同时也要考虑整体与各组件的关系，从而得到更符合人类认知的建模结果。

\subsection{三维曲面的重建式建模}
\esubsection{3D Surface Reconstruction}
三维曲面的重建式建模一般要求输入必须能够完整的刻画三维曲面的形状，常见的输入包括点云\cite{berger2014state}、深度图像\cite{izadi2011kinectfusion}、RGBD图像\cite{zollhofer2014real}等，并且这些输入表达之间很容易互相变换。以点云为例，点云一般由扫描设备所捕获，定义为离散点的一个集合，其中每个点都分布在物体表面。点云数据一般有较高的密度，使其能够较好的刻画曲面形状；然而，原始的捕获数据一般有严重噪声、缺少拓补信息、局部缺失等特点，因此需要利用重建式建模技术恢复三维曲面。

为保证曲面的连续性和光滑性，重建式建模更倾向于选用数学定义的方式来表示三维模型曲面，较为典型的是中轴表达和隐式曲面等，除此之外还有骨架表达、参数化曲面等\cite{berger2014state}。由于其思想的相似性，这里我们重点介绍中轴表达和隐式曲面两种。

\textbf{中轴表达}  中轴表达方式\cite{bium1964transformation}可以近似看做一种骨架表达方式，传统的骨架是1D的，一般被认为是由物体形状横切面的中心点组成。相比而言，中轴的优势在于其有严格的数学定义：中轴被定义为一个点集，其中每个点都在曲面上有两个或两个以上的切点。因此，中轴和对应曲面是严格的一对一关系，可以被用来表达其对应曲面的形状。另一方面，中轴的性质使得我们可以将其与计算几何中的Voronoi 图联系起来。Amenta 等人在论文\cite{amenta2001power}中提出，对给定的点云计算其Voronoi图，当点云足够密时，每个Voronoi细胞会变得细长并且垂直于曲面，这时该曲面的中轴点就分布在Voronoi顶点附近。利用这一思想，Power crust算法从Voronoi图中提取顶点的一个子集作为近似中轴，面片的一个子集作为对曲面的重建。

然而，当输入点云数据被噪声所干扰时，利用Voronoi图提取的中轴变得很不稳定，且形状带有很多毛刺，具体表现为曲面局部的微小变化就会引起中轴的形状甚至整个拓补结构的变化。为应对带有噪声的输入数据，重点是如何从原始数据中提取光滑且能够较好表示局部形状细节的中轴，从而消除噪声影响。Dey等人提出一些初步的标准来去除毛刺\cite{dey2002approximate}：角度条件（angle condition），【解释】；比例条件（ratio condition），【解释】。随后Dey等人又提出基于中轴的Robust COCONE算法\cite{dey2004provable}，针对某些噪声模型，其从理论上证明了其所重建的曲面的误差上限【待验证】。其他的去除中轴毛刺的标准还包括：中轴点到其两个切点所形成的角度\cite{foskey2003efficient}、中轴点到其切点的距离\cite{chazal2005lambda}等。这些方法简单且有着严格的数学证明，但其只适用于某些噪声模型，并且很容易将形状的局部细节也作为噪声一并去除。

为了在简化中轴的同时保持曲面细节，Miklos等人提出了Scale Axis Transform\cite{Giesen2009TheSA,miklos2010discrete}，其思想在于通过比较某个局部细节与其周围细节的大小来判断其重要性。具体做法是首先计算曲面对应的中轴以及每个中轴点到其相应切点的距离，称为中轴点半径$r$，然后定义缩放参数$s>1$ 来放大中轴半径$r'=sr$，放大后如果一个中轴点及其半径所定义的中轴球被周围其他中轴球所覆盖，则去掉该被覆盖的中轴点。这种简化方法计算得到的中轴不仅能处理噪声，还能够保持原始曲面的一些局部特征，但是对每个中轴点的判断仍然局限于其周围的局部特征。

为进一步提高简化中轴对曲面细节的保持，Yan等人提出了基于整个形状的细节重要性判断\cite{yan2016erosion}，从而更好的分辨噪声与曲面细节特征。该方法提出了一种从边缘向内部逐渐侵蚀的算法：想象在中轴的每个边缘点处点火，火以恒定速率沿着中轴扩散，当其烧到多个分支相交的顶点时，只有当还剩一条分支没有烧到该顶点时才能沿着这条剩余分支继续传播。基于这个思想所推导出的中轴在2D和3D的简化算法可以通过调整参数来控制其简化程度，而且能够更好的生成保持拓补结构及曲面形状的中轴表达。

除了基于Voronoi图的中轴提取算法，还有基于体素的细化算法\cite{ma1996fully}和基于有向距离场梯度的提取算法
\cite{xia2011fast,song2010hierarchical}。其中基于体素的细化算法指将空间划分成网格化的体素表达方式，从曲面向内逐渐扩散从而细化整个形状，直到其宽度收敛至一个体素为止。细化所得到的中轴同样由体素组成，但缺点在于有限的分辨率妨碍了曲面的精确表达。而基于有向距离场的梯度，思想是把曲面的有向距离场作为定义在三维空间的函数，除了中轴点处的梯度不可计算外，其余所有点处的梯度都指向中轴。因此，从曲面沿梯度向内扩散也会收敛至中轴。对这类方法，其所依赖的有向距离场的等值曲面正是要提取的中轴所对应的曲面，所以它们的工作流程是先将原始曲面重建为有向距离场，然后再提取中轴。尽管这类方法并不能作为曲面重建算法，从这里我们可以看出，中轴表达与曲面重建问题是紧密耦合并且互相依存的关系\cite{bernardini1999ball,chang2009surface}。

\textbf{隐式曲面}  因其连续性和光滑性、易于表达拓补结构变化、方便计算布尔操作等优点，隐式曲面被广泛的应用于曲面重建工作。隐式曲面是连续模型中的一类表达方式，其特点是利用隐式方程$F(p)=0$表示曲面形状，其中$p$代表输入的离散点。对于三维空间中的任意一点$p$，我们定义曲面内外的点所得的函数值具有不同的符号，即$F(p_{in})>0,F(p_{out})<0$或$F(p_{in})<0,F(p_{out})>0$，如三维空间中的球体可表示为$F(x,y,z)=x^2+y^2+z^2=0$。因此，对于输入的点云数据$P=\{p_1,p_2,...,p_n\}$, 隐式曲面重建需要计算满足条件$F(p_1)=0,F(p_2)=0,...,F(p_n)=0$ 的函数表达式。一般做法是首先假设合适的函数类型，如多项式函数等，然后通过函数插值或拟合计算其所需的参数。

自上世纪末，隐式曲面重建方法得到广泛的关注。隐式曲面一般将函数空间表示为一组基函数，通过不同线性组合得到各种曲面形状对应的函数表达，常见的隐式函数有径向基函数（RBF, Radial Basis Function）\cite{carr2001reconstruction}、MPU（Multi-level Partition of Unity）\cite{ohtake2003multi}、泊松函数（Poisson Function）\cite{hoppe2008poisson,kazhdan2013screened}、PHT样条（PHT-spline）\cite{wang2010adaptive,wang2011adaptive}等。2006年，Y.Ohtake提出了MPU方法\cite{ohtake2003multi}，将整个区域根据输入点云划分为八叉树，对每个子节点根据其内部点云的分布进行局部拟合，从而使得方法可以处理输入的大量点云。但是，这种方法依赖于输入点云的法向信息，并且重建后的数据表达依赖于八叉树的划分，形式不够简洁。2009 年，M.Lazhdan使用Poisson 方程对曲面做拟合\cite{hoppe2008poisson,kazhdan2013screened}，得到的指示函数在物体表面内部函数值为1，外部为0。因此通过分析指示函数的梯度就可以将曲面重建出来。然而，这些隐式曲面重建方法并没有强调结果的稀疏性，并且在处理有缺陷的输入点云时各自有不同程度的局限。

RBF作为对三维物体表面进行重建的方法在2001年由J.Carr提出\cite{carr2001reconstruction}。每个RBF基函数都由一个中心点$q$ 表示，即$\phi_q(p)$，因此整个曲面函数就表示为【曲面公式】。这里基函数可以有多种选择：$\phi_q(p)=|p-q|$、$\phi_q(p)={|p-q|}^2log(|p-q|)$、$\phi_q(p)=|p-q|^3$ 等。J.Carr 选用曲面表面点作为基函数的中心点，通过对表面点及其附近点的插值或拟合，得到零等值面作为重建曲面的隐式函数。因此，整个问题被表达成：输入形状曲面的表面离散点$P=\{p_1,p_2,...,p_n\}$，定义函数$F(p)=s(p)+\sum_{i=1}^n\lambda_i\phi_{p_i}(p)$ （其中$s(x)$为一个多项式函数，由多项式基$s=\{s_1,s_2,...,s_l\}$, 参数$c=\{c_1,c_2,...,c_l\}$组成），求参数$\lambda=\{\lambda_1,\lambda_2,...,\lambda_n\}$ 和$c$, 使其满足$F(p_1)=0,F(p_2)=0,...,F(p_n)=0$。

为了避免得到$\lambda=\{0,0,...,0\}$的解，解决方法是根据曲面法向$n_{p_i}$在每个表面点$p_i$附近得到一对内部点$p^{in}_i=p_i+dn_{p_i}$和外部点$p^{out}_i=p_i-dn_{p_i}$【符号待验证】，然后利用RBF函数拟合曲面附近的有向距离场（SDF，Signed Distance Field），即
$$F_\theta(p^{in}_i)=d, F_\theta(p_i)=0, F_\theta(p^{out}_i)=-d, i=1,2,...,n.$$因此问题就变换为求解线性方程组：
$$
\begin{pmatrix} A & S \\ S^T & 0 \end{pmatrix}
\begin{pmatrix} \lambda \\ c \end{pmatrix}
=
\begin{pmatrix} d \\ 0 \end{pmatrix}
$$
其中
$$A_{i,j} = \phi(|p_i-p_j|), i,j=1,...,n,$$
$$S_{i,j} = s_j(p_i), i=1,...,n,  j=1,...,l$$
当输入的点云规模较大时，RBF方法需要求解大型线性方程组，其空间复杂性为$O(N^2)$，时间复杂性为$O(N^3)$，这给RBF重建的应用带来了极大限制。

由于RBF重建所得到的曲面表达十分简洁，其被广泛的研究与改进。为了降低时空复杂性，2001年，J.Carr\cite{carr2001reconstruction}利用FMM（快速多级算法）\cite{beatson1992fast,wendland2002fast}计算RBF函数值，将空间复杂性降为$O(N)$，时间复杂性降到$O(NlogN)$。然而这种算法的缺点在于实现较复杂，并且对每个基函数都需要进行处理。之后，依据RBF中心点对远处的点影响较小这一原理，Morse 提出了CSRBF （紧支撑径向基函数）\cite{morse2005interpolating}。CSRBF 的思想是其中心点只能影响周围一定范围内的点，典型的基函数公式如$\phi_q(p)=(1-|p-q|)_+^4(4|p-q|+1)$，其中$[x]_+=max(x,0)$，从而将大型系数矩阵转换为稀疏矩阵，加快了计算速度并减少了存储空间。这一技巧被广泛的应用于后来的RBF 重建方法中。而为了处理大量点云输入，Y.Ohtake进行了多尺度的RBF 重建\cite{ohtake2003multi}，以层级式的方式进行从粗糙到精细（coarse-to-fine）的重建，在每一层逐渐增加重建曲面的精确性。这种方法帮助用户控制计算速度和重建精确性的平衡。I.Tobor\cite{tobor2004efficient}将RBF 与MPU 结合起来，将整个区域根据输入点云的分布划分为多个互相部分重叠的子区域，对每个子区域进行局部重建再结合成整个隐式函数。这种方法将一个大型线性方程组分解为多个小的线性方程组，从而降低了时空复杂性，能够处理大规模的点云输入。然而，这种分解容易在各个子区域重叠处引起光滑性的问题，并且表达曲面所需的基函数个数仍然很多，所需存储量和实时渲染时间的问题仍没有解决，因此难以满足网络传输和实时显示的需求。

为了改进重建后渲染曲面的计算速度，一种直接的方法是用稀疏的基函数表示整个曲面。目前稀疏重建分为两种不同思想，一是选取某种分布的基函数的稀疏子集\cite{ohtake2005sparse,ohtake2006sparse,samozino2006reconstruction}，通过求解线性方程组得到隐式方程，其关键在于如何选取稀疏的基函数子集并且使其有能力拟合整个曲面。Y.Ohtake在点云中选取一些离散点形成局部面元来构建基函数\cite{zhao2013reduction}，然后通过优化计算每个面元的最优半径。由于每个基函数定义为相对复杂的二次函数，使得这些基函数有能力拟合曲面细节处的形状。这种方法改进了渲染速度，但仍需要较大存储量，并且渲染计算较为复杂。另一种是利用稀疏优化\cite{zhao2013reduction,kang2015knot,wang2014decoupling}，通过减小某些基函数的权重达到稀疏的目的。为了获得更高效的表达，这些基函数具有不同的影响范围、形状等\cite{ohtake2005sparse,ohtake2006sparse}，即用更多的参数量换取基函数个数的减少，因此没有从根本上解决问题。


\subsection{三维形状的交互式建模}
\esubsection{Interactive Modeling for 3D Shapes}
\label{chap12}
三维形状的交互式建模重点在于建立简单高效的建模流程，使得非专业用户也可以创造真实有用的数字化模型。目前大部分三维物体建模工作实际上都由专业设计师和建模师完成，这项工作需要对要设计的物体有深入的了解，以及对复杂建模软件的熟练应用。而在大数据时代，个性化定制需求渐渐增加，非专业用户既不熟悉复杂的建模操作，也可能对目标模型不够了解。交互式建模的特点就在于通过先验知识协助用户建模，使其可以通过少量、抽象的交互来创建三维形状。

为减轻用户的工作量，基于草图的建模方法通过输入的设计图或简笔画等线条来生成目标模型。然而，二维平面草图到三维形状的映射是一对多的关系，因此容易引起歧义（Ambiguity）。因此用户需要从实际建模过程中学习经验来更好的进行交互。经典的交互式系统如Teddy\cite{igarashi1999teddy}、FSW\cite{karpenko2002free}等要求用户交互地绘制三维形状在当前视角下的边缘曲线，迭代地生成目标模型。另一方面，Matisse\cite{bernhardt2008matisse}、SCALe\cite{zanni2013scale}等系统通过从用户输入的二维形状中提取骨架或直接读取输入的骨架来生成三维形状曲面\cite{entem2015modeling}。尽管基于草图的建模可以使用户简单的创建三维形状，但仍需要多次调整来得到理想模型。因此，FiberMesh系统\cite{nealen2007fibermesh} 在此基础上定义了更多操作来生成复杂形状，这些操作包括针对线条拟合的曲面创建及添加操作、针对线条的切割操作、针对控制点的拖拽变形操作等。Xu等人\cite{xu2014true2form}从草图中提取曲率、正交、对称、平行等形状特征信息，通过求解带约束的优化问题来迭代地改进草图中不精确的线条以及生成满足这些约束的三维形状。这种方法能够创建高质量的模型，但对用户输入的草图要求较高。利用深度学习，神经网络可以从大规模的草图和三维形状的数据集中学习如何解释用户意图，如Pix2Vox和“所绘即所得”系统\cite{delanoy20183d}但这类方法普遍存在生成模型质量较差，难以精确调整等问题。

为进一步减轻用户负担，基于样例的建模则提供了更加简单的交互方式：用户只需要提供一些三维形状样例，机器根据这些样例自动生成相似的模型集合供用户选择。根据不同“模型相似性”度量的定义，这类方法包括形状插值与混合（Shape Interpolation and Blending），同类别物体自动生成（Intra-class Object Synthesis），三维形状风格迁移（3D Shape Style Transfer）等。

对形状插值与混合，其模型的相似性仅仅定义为两个模型几何形状的相似性。用户输入两个形状上相似的模型形状，称为源模型（Source Model）和目标模型（Target Model），一般要求这两个形状由拓补相同的网格组成，即两个模型的唯一区别在于其网格顶点位置。直接利用对应顶点位置及其邻域的线性或非线性插值生成相应的中间模型形状\cite{alexa2003differential,xu2006poisson}，在源模型和目标模型相差较大时，难以保持形状的真实性。为提高中间形状的质量，研究者们一方面提出更加复杂的插值函数和几何约束，如刚性变换（As-rigid-as-possible）\cite{alexa2000rigid}和等距变换（As-isometric-as-possible）\cite{kilian2007geometric}等；另一方面基于现实世界的物理规则定义能量函数，如弹性变换\cite{heeren2012time,heeren2014exploring}，通过最小化能量函数优化得到中间形状。近几年，由数据驱动的形状插值方法取得更好的效果，Marras等人\cite{michael2012a}观察到模型形状在变化过程中一般在其对应的局部保持了连续性，因此他们将整个模型分割为若干部分，对每部分分别进行插值然后组合，这种方法提高了生成的中间形状的质量。Gao等人\cite{gao2013data,gao2017data} 利用大规模数据集来推测中间形状的可靠性：首先通过模型相似性的度量将一个较大的模型集合组织成图结构，其中每个顶点对应一个模型，每两个顶点之间的边将两个模型的不相似性作为权值。进行插值时，算法在图结构中计算一条源模型和目标模型之间的最短路径，然后以路径中的中间节点形状作为依据辅助形状插值过程。

同类别物体自动生成，其模型的相似性定义为其在语义类别上的相似性，即是否属于同一类别的物体模型。这类应用仅仅要求机器生成与输入模型属于同一类别的新模型，而不要求其作为“中间”形状，因此深度神经网络得到广泛的应用。大量工作针对三维模型的不同表达方式，利用生成式网络学习一个低维形状空间
深度神经网络可以从大规模同类型的模型中学习到其共同特征，从而将模型形状映射为低维隐藏表征（Low-dimensional Latent Representation）。目前大多数相关工作针对的是三维模型的体素化表达，将整个空间划分为类似于二维像素的三维体素，然后用带有主流的卷积神经网络直接应用到三维数据。Wu 等人\cite{wu2016learning} 将变分自动编码器（Variational Auto-encoder）和对抗式生成网络（Generative Adversarial Network）结合起来，将大量三维模型自动组织成形状空间从而得到低维向量到三维形状的映射。训练后网络可以将任意高斯向量映射为形状空间中对应点所代表的三维形状。但体素化表达的缺陷在于细节处形状质量差，且所需的空间和时间都是$O(N^3)$。因此，Tatarchenko等\cite{tatarchenko2017octree}提出了基于八叉树的生成网络，将三位模型转换成八叉树表达方式\cite{wang2017cnn}输入神经网络，从而能够生成高精度的模型。为更好的表达模型形状，研究者们试图用深度神经网络处理其他三位模型表达方式。随着经典的点云网络PointNet\cite{qi2017pointnet,qi2017pointnet++}、PointCNN\cite{li2018pointcnn} 分别提出不同的方案来解决点云的数据点无序性、数据点数量可变性等特点，越来越多的研究者提出了针对点云的生成式网络
\cite{gadelha2017shape,achlioptas2018learning}。AtlasNet\cite{groueix2018} 通过将三维模型参数化学习二维平面到三维形状的映射，训练后的网络可将任意二维坐标映射为三维模型（也就是二维流形形状）上的相应点，从而得到整个模型曲面。同时，几何深度学习（Geometric Deep Learning）\cite{bronstein2017geometric}在近两年逐渐被研究者所关注，图像图形领域也开始探索利用不同网络结构处理三维模型的网格表达数据，其做法主要有两种：一是对网格模型计算拉普拉斯矩阵，然后进行特征值分解，即将不规则的网格结构转换成规则数据，然后应用经典卷积网络（Convolutional Mesh Autoencoders for 3D Face Representation）；另一种是定义基于图结构的卷积操作\cite{wang2018pixel2mesh}，如先对模型顶点进行聚类，然后针对每个聚类进行“卷积”。目前相关工作仍十分有限，所生成的模型大体上是目标类别的模型，但在光滑性、连续性等方面还远远未达到所需的建模标准。

三维形状的风格迁移，其依据的模型相似性有风格、功能等难以直接定义的度量。事实上，风格迁移代表了一类多度量问题，一方面目标模型要和给出的样例模型有着相似风格，另一方面目标函数要保持其原有的内容（类别、结构等）。
%事实上，不同研究工作对三维物体的风格，尤其是人造物体的风格，有着不同的定义。
Ma等人\cite{ma2014analogy}将物体的风格和结构区分开，这里结构指的是模型的组成部分，风格指各部分的几何形状特征。用户指定一个从模型A到模型B 的变换，算法利用类比的方式将和模型A具有相似结构的模型C变换成目标模型，即生成的目标模型和模型B有相似的结构且和模型C有相似的风格。Han等人\cite{han20153d}将模型风格定义为相似模型中最独特的部件，然后通过替换相应部件做到风格迁移。Lun等人\cite{lun2016functionality}要求目标模型在保持其功能的条件下进行风格迁移，通过进行一系列风格元素层次的变换操作来完成目标模型的生成。除了从一对模型中学习其不同的风格之外，Hu等人\cite{hu2017co}从具有相同风格的模型集合中协同分析其共有的风格元素，对于用户输入的源模型，其可以根据形状提供不同的风格建议，用户可通过选择添加或删除某些风格元素来进行交互式建模。然而局限于现有的小规模数据集和风格的多样性，这类问题仍存在巨大的研究空间。

从以上三类研究工作中可以看出，模型相似性的度量在这些问题中起到了重要作用。这是因为机器可以利用大规模数据集来学习归纳这些模型形状的相关特征知识，从而辅助用户生成真实可靠的模型。有针对性的、可信的模型相似性（或不相似性）度量可以帮助机器提高对数据集的认知，并更智能的利用知识辅助建模过程。
%对于三维物体形状，其组成具有明显的结构划分，一般同一类物体都由同样一组部件组成，比如大多数椅子都可划分为座位、椅背、椅腿、或把手等部分。为了快速大量生成可靠的物体形状，可以通过重组这些部件生成新的物体集合。

\subsection{三维结构模型的建模}
\esubsection{3D Structural Modeling}
自动生成由体素、点云、或网格表示的三维模型难以保证其形状质量，如模型的连续性、光滑性、以及各部分之间的连接关系等\cite{wu2016learning,groueix2018}。事实上，现实世界中很多三维模型都可以看做结构模型，如人工制造的物体以及室内场景等。这里结构模型定义为整体-组件结构，如椅子一般可以划分为座位、椅背、椅腿、或把手等组件，再比如室内场景可以划分为不同物体的摆放集合。这些结构帮助我们理解分析模型的语义、功能、风格等特性。尽管人工制造的物体以及室内场景都常被看做整体-组件式结构，其在组件类别、组合方式等方面都大有不同。这里我们分别介绍针对两种模型对象的研究工作。

\textbf{人造物体}往往由一些简单形状等作为部件组成，并且同一类模型一般具有同样的组件结构。这些相似的结构体使得用户可以简单的从不同样例模型中选择感兴趣的部分，然后利用算法自动将其拼接成新的三维模型\cite{funkhouser2004modeling}。但当用户选择的模型部件形状相差很大时，这种拼接算法在连接处的形状质量较差。因此，Kraevoy等人\cite{kreavoy2007model}从一个同类模型集合出发，先用算法对模型集合进行协同分割，然后将这些模型分割成可替换的部件，然后重新组合为新模型。Chaudhuri等人\cite{chaudhuri2011probabilistic}用概率图来学习模型各部件之间的关系，根据同类模型的集合，首先利用一些预定义的几何特征，如形状直径特征（SDF，Shape Diameter Feature）、曲率（Curvature）、形状上下文特征（Shape Context）、PCA参数等，将模型分割成部件并给出相应的标签，这时每个模型的各部分标签都被组织成层级式树形结构。之后对于每个组件标签，同样利用几何特征进行聚类，将具有相似特征的部件聚类为一个集合。算法对于模型集合学习概率图，其中每个节点代表具有同样标签相似几何特征的一类部件集合，每条边记录了两个邻接节点之间的标签依赖关系、几何风格特征聚类、对称性、部件数量等信息。要做到自动生成模型，算法在学习到的概率图上进行随机采样，然后利用概率对每个采样进行打分，选取概率最大的采样并从相应的节点中选择部件进行组合得到新的三维模型。

Chaudhuri等人的基于概率图的模型组装算法可以看做针对结构化三维模型的一类代表性方法，即基于结构化概率模型（Graphical Model，或Structured Probabilistic Model）的生成算法。这类方法通常从同类的模型几何中学习归纳出图结构知识，组织成如贝叶斯网络（Bayesian Network）、马尔可夫随机场（MRF，Markov Random Field）、因子图（Factor Graph）、联结树（Junction Tree 或Clique Tree）等概率模型，来表示三维模型中各部分的条件依赖关系。因此，三维模型的自动生成问题就转换成采样问题。

基于这一思想，Kalogerakis等\cite{kalogerakis2012probabilistic}提出树形的概率图模型，来学习三维模型结构变化的隐式原因（latent cause of structural variability），以提高生成的三维模型的完整性和多样性；Huang等人\cite{huang2015analysis}提出以深度玻尔兹曼机形式的“Beta模型机（Beta Shape Machine）”,自下而上的从模型各部件上离散点的位置和特征来学习各部件之间的高层依赖关系，然后对每类部件学习一个“模板形状”。三维模型的生成通过随机采样计算得到，为保证三维模型的真实性，每个部件都由数据库中与生成的模型部件最接近的形状通过变形获得。Zou等
\cite{zou20173d}提出3D-PRNN，将三维模型的各部件组织成序列结构，利用生成式循环神经网络（RNN，Recurrent Neural Network）自动生成多样化的人造物体模型。同时，Li等人\cite{li2017grass}将模型部件组织成层级式树状结构，利用递归神经网络（RvNN，Recursive Neural Network）学习各种三维模型的组织结构以及形状，从而自动生成真实可信的模型形状。尽管结构化的三维形状表达方式在建模领域取得了巨大的成功，但其在部件拼接、引入用户指定约束等方面仍有其局限性。

\textbf{室内场景}在场景设计和游戏中经常被组织成结构化表达方式，如场景图（Scene Graph）用来表达场景中物体之间的联系；层次包围盒树（BVH，
Bounding Volume Hierarchy）用来加速碰撞检测和渲染。室内场景建模一般将场景内物体模型作为独立的基本部件，研究如何选择合适的物体及其摆放位置来满足场景需求。Yu等人\cite{Yu2011MakeIH}通过观察大量室内场景布置等数据，提出若干物体摆放需要满足的约束，如大多数物体的“背面”一般是紧靠墙面、一个物体周围一般需要有足够空间使人能够与其交互、电视等特殊物体的功能性要求其前方不能被遮挡等。这些预定义的约束通过模拟退火算法优化得到满足，从而生成真实可信的场景布置方案。然而这些繁琐复杂的预定义约束限制了该系统的应用，同时也难以生成大量多样化的室内场景。

结构化概率模型同样被广泛应用在室内场景生成中，然而室内场景与物体模型相比有更多难点：1）物体模型的各部件组成基本保持一致，比如几乎所有椅子模型都可以划分为座位、椅背、椅腿等组成部分；而室内场景中的物体具有多样性，同类场景中出现的物体可能完全不同，比如卧室中可能有床和床头柜以及台灯，而另一个卧室场景可能只有床和衣橱等。2）物体模型中每种部件的位置基本固定，比如椅腿总是出现在整个模型的下半部分；而室内场景中每个物体的摆放更加松散。3）室内场景中各物体的依赖关系较为复杂，某些物体的摆放较为随意（如盆栽），而某些物体的摆放严重依赖于其他相关物体的位置（如床和床头柜）。因此，Fisher等人\cite{fisher2012example}提出用两个概率模型学习室内场景数据，一是物体选择模型（Occurrence Model）学习场景中物体之间的依赖关系，二是物体摆放模型（Arrangement Model）用来学习物体之间的相对位置关系。相应的，室内场景生成也分为两步，首先采样生成场景中要出现的物体，然后通过概率选择合适的物体摆放位置。相似地，Kermani 等\cite{kermani2016learning}提出用因子图（Factor Graph）学习室内场景布置规律，并将其中物体之间的关系划分成支撑（Support）、对称（Symmetry）、邻近（Proximity）、朝向（Distinct Orientation）四类，所生成的室内场景也更加符合人类习惯。

室内场景设计以满足人类活动需求为目标，人类与场景中物体的交互反映出其在功能性上的作用和相关性。Fu等人\cite{fu2017adaptive}通过室内场景数据集中标注的人的位置和朝向来识别物体之间的相关性，从而创建包含物体功能性的概率模型；同样以人类活动为指导，Qi等人\cite{qi2018human}提出了带有属性的空间与- 或图（S-AOG，Spatial And-Or Graph）来表达室内场景数据。从不完整的扫描数据出发，Fisher等人\cite{fisher2015activity}用算法自动创建对应的场景大致形状以及可能在此场景中发生的人类活动，然后通过选择粗糙场景形状所对应的物体模型实例来生成真实的室内场景。Ma等
\cite{ma2016action}以人类活动为中心创建概率图模型，其中节点表示活动，边表示活动之间的转换概率（Transition Probability）。生成室内场景时，首先从概率图中采样一系列活动节点，每个活动触发相应的物体模型及其摆放，从而渐进式的得到逐渐完整的室内场景。

【convolution network】

\section{本文主要工作和创新点}
\esection{Primary Work and Contributions}
本文关注各种不同三维模型形状的特点以及如何改进其相应的建模应用，包括自由曲面、人造物体模型、三维室内场景等。
针对自由形状曲面，由于其形状的多变性，一般并没有太多关于形状特征的先验知识。因此，这类曲面的建模通常采用重建式建模，目的是从扫描获得的现实世界数据中快速精确的还原曲面形状。
相比之下，由于人造物体是被用来完成某些特定功能，其类别和功能目的决定了其形状必须满足某些约束。因此人造物体的建模一般包括了对该类物体的理解分析，从而使机器能够智能的辅助非专业用户创建真实合理的三维模型。在这种情况下，对物体形状的语义、功能、风格认知与分析对改进建模过程有着关键的作用。
而室内场景一般由多个互相独立又互相关联的物体组成，其独立性在于每个物体都有各自的形状与类别，而关联性在于很多物体需要协作来提供某种功能性目标。因此，室内场景数据一般被组织成结构式模型，建模或自动生成时需要考虑物体之间的联系来保证其合理性。

本文的主要研究内容和创新点包括：

1. 一种基于中轴的稀疏RBF曲面重建算法

- 本研究关注如何利用RBF隐式曲面重建自由曲面形状。目前已有的RBF曲面重建算法尽管能够满足精度需求，然而其需要大量的基函数或较为复杂的基函数来表示整个形状，因此在曲面表达的简洁性和存储量方面仍存在局限性，限制了其在网络传输、实时渲染等方面的应用。我们关注的问题在于如何在保持足够重建精度的同时减少表达曲面形状所需要的参数量。

- 利用中轴点作为RBF基函数的中心点。由于中轴与对应形状在数学定义上有严格的一对一关系，并且具有良好的对称性，因此将RBF基函数的中心点定位在中轴上有利于用少量基函数影响较大区域的曲面表面，从而有效的提高其稀疏性。

- 利用稀疏优化技术进一步减少RBF曲面所需基函数的数量。稀疏优化是XXX。

2. 一种面向细粒度语义的形状相似性度量

- 本研究关注如何基于细粒度语义对模型形状进行比较，并给出一种动态的形状相似性度量。目前已有的研究大多仍关注分析物体的高层类别，如椅子、飞机等，基于细粒度语义研究工作也仅关注物体模型的分类，因此只能判断物体是否属于转椅、躺椅、摇椅等细粒度类别，而无法给出数字化的相似性度量。在此基础上，我们提出一种动态的模型相似性度量，首先利用数据驱动的方法学习依据每种类别的辨识性度量，然后根据形状空间中每个模型与各个类别的相关性将多个度量动态融合起来，使得在比较任两个模型时更多的依据其相关的类别进行考量。这种形状相似性度量同时考虑到模型的形状和语义信息，因此可以广泛的应用于多种交互式建模场景中，使得机器可以从相似的模型实例中学习先验知识，辅助非专业用户创建合理有用的物体模型。

- 利用自动编码器自动学习模型的一致性表达。由于不同模型在几何和拓补上的多样性，计算模型的各部分对应关系依然是图形学中的难题。因此我们利用深度神经网络中的自动编码器，以无监督的方式学习每个模型的多视图表达（Multi-view Representation）到隐式向量表达（Latent Vector Representation）的映射关系。深度神经网络通过多层卷积层提取高层特征，并将信息编码在相应的向量表达中。学习到的隐式向量表达的一致性在于，这些向量的对应元素一般表示了模型对应区域的高层特征，从而使得我们可以通过比较三维模型的隐式向量表达来分析其对应区域的相似性。

- 利用每个三维模型到各个类别的相关性对多个特定度量进行动态融合。目前已有的度量融合方法仍然是对每个度量分配一个常量数值作为权值进行线性组合，因此实质上仍然是定义了一个统一的全局性度量。然而事实上我们在比较两个物体模型时并不是关注全局整体性的区别，如在比较躺椅和转椅时，由于这两类物体的辨识性特征在于椅腿，因此我们更多的关注其在椅腿区域的相似性来衡量其相似性，而较为忽略其椅座和椅背，尽管这两部分对于沙发、办公椅来说可能是较为重要的部分。

3. 一种基于生成式递归神经网络的室内场景自动生成算法

- 本研究关注利用神经网络进行室内场景自动生成的问题。传统的基于概率模型的方法在计算效率以及生成场景的多样性方面均有局限。我们提出将室内场景组织成层级式树形结构，并用生成式的递归神经网络自动学习场景数据中的高层共同特征。训练后的网络可以将随机采样的向量映射为真实合理的室内场景模型，从而做到快速大量的生成多样化的场景数据。

- 适用于递归神经网络的场景层级式结构。

- 新型的物体相对位置表达方式

- 室内场景的快速自动生成算法

\section{各章节安排}
\esection{Outlines of the Thesis}


%\cleardoublepage



